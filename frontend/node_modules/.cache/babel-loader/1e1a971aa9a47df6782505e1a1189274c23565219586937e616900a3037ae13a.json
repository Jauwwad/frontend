{"ast":null,"code":"import _objectSpread from\"/Users/razashaikh/Desktop/sih/python-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Typography,Box,TextField,Button,Grid,Select,MenuItem,Stepper,Step,StepLabel,Card,CardContent,Alert,CircularProgress}from'@mui/material';import{MapContainer,TileLayer,Marker,useMapEvents}from'react-leaflet';import{projectAPI,handleAPIError}from'../services/api';import{useSnackbar}from'notistack';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LocationPicker=_ref=>{let{position,setPosition}=_ref;useMapEvents({click(e){setPosition({lat:e.latlng.lat,lng:e.latlng.lng});}});return position?/*#__PURE__*/_jsx(Marker,{position:[position.lat,position.lng]}):null;};const ProjectCreate=()=>{const navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const[activeStep,setActiveStep]=useState(0);const[loading,setLoading]=useState(false);const[formData,setFormData]=useState({project_name:'',location:{lat:19.0760,lng:72.8777},// Default to Mumbai\narea_hectares:'',ecosystem_type:'',restoration_method:'',community_details:'',contact_email:'',phone_number:''});const ecosystemTypes=['mangrove','seagrass','salt_marsh','coastal_wetland'];const restorationMethods=['Natural regeneration','Assisted regeneration','Active restoration','Hybrid approach'];const steps=['Project Details','Location & Area','Community Info','Review & Submit'];const handleInputChange=field=>event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:event.target.value}));};const handleLocationChange=newPosition=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:newPosition}));};const validateStep=step=>{switch(step){case 0:return formData.project_name&&formData.ecosystem_type&&formData.restoration_method;case 1:return formData.area_hectares&&formData.location.lat&&formData.location.lng;case 2:return formData.community_details&&formData.contact_email&&formData.phone_number;default:return true;}};const handleNext=()=>{if(validateStep(activeStep)){setActiveStep(prev=>prev+1);}else{enqueueSnackbar('Please fill in all required fields',{variant:'warning'});}};const handleBack=()=>{setActiveStep(prev=>prev-1);};const handleSubmit=async()=>{try{setLoading(true);const projectData=_objectSpread(_objectSpread({},formData),{},{area_hectares:parseFloat(formData.area_hectares)});const result=await projectAPI.create(projectData);enqueueSnackbar('Project created successfully!',{variant:'success'});navigate('/projects');}catch(error){const errorInfo=handleAPIError(error);enqueueSnackbar(errorInfo.message,{variant:'error'});}finally{setLoading(false);}};const renderStepContent=()=>{switch(activeStep){case 0:return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Project Name\",value:formData.project_name,onChange:handleInputChange('project_name'),required:true,placeholder:\"e.g., Coastal Mangrove Restoration Project\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,select:true,label:\"Ecosystem Type\",value:formData.ecosystem_type,onChange:handleInputChange('ecosystem_type'),required:true,children:ecosystemTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type,children:type.charAt(0).toUpperCase()+type.slice(1)},type))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,select:true,label:\"Restoration Method\",value:formData.restoration_method,onChange:handleInputChange('restoration_method'),required:true,children:restorationMethods.map(method=>/*#__PURE__*/_jsx(MenuItem,{value:method,children:method},method))})})]});case 1:return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Area (Hectares)\",value:formData.area_hectares,onChange:handleInputChange('area_hectares'),required:true,inputProps:{min:0,step:0.1}}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Current Location: \",formData.location.lat.toFixed(6),\", \",formData.location.lng.toFixed(6)]})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Box,{sx:{height:300,border:'1px solid #ccc',borderRadius:1},children:/*#__PURE__*/_jsxs(MapContainer,{center:[formData.location.lat,formData.location.lng],zoom:13,style:{height:'100%',width:'100%'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),/*#__PURE__*/_jsx(LocationPicker,{position:formData.location,setPosition:handleLocationChange})]})}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",sx:{mt:1,display:'block'},children:\"Click on the map to set project location\"})]})]});case 2:return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:4,label:\"Community Details\",value:formData.community_details,onChange:handleInputChange('community_details'),required:true,placeholder:\"Describe the local communities involved, their role, and expected benefits...\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"email\",label:\"Contact Email\",value:formData.contact_email,onChange:handleInputChange('contact_email'),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Phone Number\",value:formData.phone_number,onChange:handleInputChange('phone_number'),required:true,placeholder:\"+91 XXXXX XXXXX\"})})]});case 3:return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:3},children:\"Please review your project details before submission. Once submitted, the project will be sent to NCCR for review and approval.\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Project Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",formData.project_name]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ecosystem:\"}),\" \",formData.ecosystem_type]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",formData.restoration_method]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",formData.area_hectares,\" hectares\"]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Contact Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",formData.contact_email]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",formData.phone_number]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",formData.location.lat.toFixed(4),\", \",formData.location.lng.toFixed(4)]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Community Details\"}),/*#__PURE__*/_jsx(Typography,{children:formData.community_details})]})]})]});default:return null;}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Create New Blue Carbon Project\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,sx:{mb:4},children:steps.map(label=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label))}),renderStepContent(),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mt:4},children:[/*#__PURE__*/_jsx(Button,{disabled:activeStep===0,onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(Box,{children:activeStep===steps.length-1?/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):null,children:loading?'Submitting...':'Submit Project'}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleNext,disabled:!validateStep(activeStep),children:\"Next\"})})]})]})})]});};export default ProjectCreate;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}