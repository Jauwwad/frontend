{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Container,Typography,Grid,Card,CardContent,Box,LinearProgress,Chip,Button,Paper,Alert,CircularProgress}from'@mui/material';import{TrendingUp as TrendingUpIcon,Nature as EcoIcon,AccountBalance as ProjectIcon,Store as MarketIcon}from'@mui/icons-material';import{useSnackbar}from'notistack';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const[stats,setStats]=useState({totalProjects:0,totalCredits:0,verifiedProjects:0,pendingVerification:0});const[loading,setLoading]=useState(true);const[backendStatus,setBackendStatus]=useState('checking');useEffect(()=>{// Test backend connection and fetch dashboard statistics\nconst fetchDashboardData=async()=>{try{setLoading(true);// Test Python backend connection\nconst statusResponse=await fetch('/api/status');if(statusResponse.ok){setBackendStatus('connected');enqueueSnackbar('Connected to Python backend successfully!',{variant:'success'});// Fetch projects data\nconst projectsResponse=await fetch('/api/projects');if(projectsResponse.ok){var _projectsData$project;const projectsData=await projectsResponse.json();setStats({totalProjects:((_projectsData$project=projectsData.projects)===null||_projectsData$project===void 0?void 0:_projectsData$project.length)||23,totalCredits:1250,verifiedProjects:18,pendingVerification:5});}}else{throw new Error('Backend connection failed');}}catch(error){console.error('Error fetching dashboard data:',error);setBackendStatus('disconnected');// Use mock data when backend is not available\nsetStats({totalProjects:23,totalCredits:1250,verifiedProjects:18,pendingVerification:5});enqueueSnackbar('Using offline data - Python backend not connected',{variant:'warning'});}finally{setLoading(false);}};fetchDashboardData();},[enqueueSnackbar]);const statCards=[{title:'Total Projects',value:stats.totalProjects,icon:/*#__PURE__*/_jsx(ProjectIcon,{sx:{fontSize:40}}),color:'#1976d2',change:'+12%'},{title:'Carbon Credits',value:\"\".concat(stats.totalCredits,\" tCO\\u2082\"),icon:/*#__PURE__*/_jsx(EcoIcon,{sx:{fontSize:40}}),color:'#2e7d32',change:'+8%'},{title:'Verified Projects',value:stats.verifiedProjects,icon:/*#__PURE__*/_jsx(TrendingUpIcon,{sx:{fontSize:40}}),color:'#ed6c02',change:'+5%'},{title:'Market Value',value:'$45,680',icon:/*#__PURE__*/_jsx(MarketIcon,{sx:{fontSize:40}}),color:'#9c27b0',change:'+15%'}];const handleQuickAction=action=>{switch(action){case'create':navigate('/projects/create');break;case'data':navigate('/data-collection');break;case'marketplace':navigate('/marketplace');break;default:break;}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"\\uD83C\\uDF0A Blue Carbon MRV Dashboard\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:\"Welcome to your Community Blue Carbon Monitoring, Reporting & Verification Portal\"}),/*#__PURE__*/_jsxs(Alert,{severity:backendStatus==='connected'?'success':backendStatus==='disconnected'?'warning':'info',sx:{mb:2},children:[backendStatus==='connected'&&'Python Backend: Connected âœ…',backendStatus==='disconnected'&&'Python Backend: Offline - Using demo data âš ï¸',backendStatus==='checking'&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(CircularProgress,{size:16}),\"Connecting to Python backend...\"]})]})]}),loading&&/*#__PURE__*/_jsx(LinearProgress,{sx:{mb:3}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[statCards.map((card,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{sx:{height:'100%',transition:'transform 0.2s','&:hover':{transform:'translateY(-4px)'}},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Box,{sx:{color:card.color,mr:2},children:card.icon}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",variant:\"body2\",children:card.title}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{fontWeight:'bold'},children:card.value}),/*#__PURE__*/_jsx(Chip,{label:card.change,color:\"success\",size:\"small\",sx:{mt:1}})]})]})})})},index)),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{color:'primary.main',fontWeight:'bold'},children:\"\\uD83D\\uDCCA Recent Activity\"}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:[{action:'ðŸŒ± New mangrove restoration project submitted in Sundarbans',time:'2 hours ago'},{action:'âœ… Carbon credit verification completed for Project #18',time:'5 hours ago'},{action:'ðŸŒ¿ 120 tCOâ‚‚ credits issued for seagrass conservation',time:'1 day ago'},{action:'ðŸ›°ï¸ Satellite data uploaded for monitoring validation',time:'2 days ago'},{action:'ðŸ’° $5,200 earned from carbon credit sales',time:'3 days ago'}].map((item,index)=>/*#__PURE__*/_jsxs(Box,{sx:{py:1,borderBottom:index<4?'1px solid #f0f0f0':'none'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.primary\",children:item.action}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:item.time})]},index))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{color:'primary.main',fontWeight:'bold'},children:\"\\uD83D\\uDE80 Quick Actions\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2,mt:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",fullWidth:true,sx:{py:1.5},onClick:()=>handleQuickAction('create'),children:\"Submit New Project\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,sx:{py:1.5},onClick:()=>handleQuickAction('data'),children:\"Upload Monitoring Data\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,sx:{py:1.5},onClick:()=>handleQuickAction('marketplace'),children:\"Browse Carbon Market\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3,backgroundColor:'#f8f9fa'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{color:'primary.main',fontWeight:'bold'},children:\"\\uD83D\\uDD27 System Integration Status\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Chip,{label:\"Main Backend: Port 8001 \\u2705\",color:\"success\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Chip,{label:\"Python Backend: Port 8002 \\u2705\",color:\"success\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Chip,{label:\"Admin Dashboard: Port 3000 \\u2705\",color:\"success\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Chip,{label:\"User Frontend: Port 8004 \\u2705\",color:\"success\",variant:\"outlined\"})})]})]})})]})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}