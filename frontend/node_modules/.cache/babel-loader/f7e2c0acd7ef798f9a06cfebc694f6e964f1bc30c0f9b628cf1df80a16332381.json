{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Card,CardContent,Typography,Button,Grid,Chip,CircularProgress,TextField,MenuItem,Dialog,DialogTitle,DialogContent,DialogActions}from'@mui/material';import{Add,Visibility}from'@mui/icons-material';import{useNavigate}from'react-router-dom';import{projectAPI,handleAPIError}from'../services/api';import{useSnackbar}from'notistack';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProjectList=()=>{const navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const[selectedProject,setSelectedProject]=useState(null);const[detailsOpen,setDetailsOpen]=useState(false);useEffect(()=>{loadProjects();},[filter]);const loadProjects=async()=>{try{setLoading(true);const filterStatus=filter==='all'?null:filter;const result=await projectAPI.list(filterStatus);setProjects(result.projects||[]);}catch(error){const errorInfo=handleAPIError(error);enqueueSnackbar(errorInfo.message,{variant:'error'});}finally{setLoading(false);}};const getStatusColor=status=>{switch(status){case'approved':return'success';case'rejected':return'error';case'verified':return'primary';case'tokenized':return'secondary';default:return'default';}};const handleViewDetails=project=>{setSelectedProject(project);setDetailsOpen(true);};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:400,children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Blue Carbon Projects\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>navigate('/projects/create'),children:\"Create New Project\"})]}),/*#__PURE__*/_jsx(Box,{mb:3,children:/*#__PURE__*/_jsxs(TextField,{select:true,label:\"Filter by Status\",value:filter,onChange:e=>setFilter(e.target.value),sx:{minWidth:200},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Projects\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"submitted\",children:\"Submitted\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"rejected\",children:\"Rejected\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"verified\",children:\"Verified\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"tokenized\",children:\"Tokenized\"})]})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:projects.length===0?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',py:6},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"No projects found\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",sx:{mb:3},children:filter==='all'?'Create your first blue carbon restoration project':\"No projects with status: \".concat(filter)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>navigate('/projects/create'),children:\"Create New Project\"})]})})}):projects.map(project=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{flexGrow:1},children:project.project_name}),/*#__PURE__*/_jsx(Chip,{label:project.status,color:getStatusColor(project.status),size:\"small\"})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ecosystem:\"}),\" \",project.ecosystem_type]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",project.area_hectares,\" hectares\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",project.restoration_method]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(project.created_at).toLocaleDateString()]}),project.carbon_credits&&/*#__PURE__*/_jsx(Box,{mt:2,children:/*#__PURE__*/_jsx(Chip,{label:\"\".concat(project.carbon_credits,\" Carbon Credits\"),color:\"secondary\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(Box,{mt:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Visibility,{}),onClick:()=>handleViewDetails(project),children:\"View Details\"})})]})})},project.id))}),/*#__PURE__*/_jsxs(Dialog,{open:detailsOpen,onClose:()=>setDetailsOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[\"Project Details: \",selectedProject===null||selectedProject===void 0?void 0:selectedProject.project_name]}),/*#__PURE__*/_jsx(DialogContent,{children:selectedProject&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Basic Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",selectedProject.id]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),/*#__PURE__*/_jsx(Chip,{label:selectedProject.status,color:getStatusColor(selectedProject.status),size:\"small\",sx:{ml:1}})]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ecosystem Type:\"}),\" \",selectedProject.ecosystem_type]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",selectedProject.area_hectares,\" hectares\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Restoration Method:\"}),\" \",selectedProject.restoration_method]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Contact Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",selectedProject.contact_email]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",selectedProject.phone_number]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",selectedProject.location.lat.toFixed(4),\", \",selectedProject.location.lng.toFixed(4)]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created By:\"}),\" \",selectedProject.created_by]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created At:\"}),\" \",new Date(selectedProject.created_at).toLocaleString()]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Community Details\"}),/*#__PURE__*/_jsx(Typography,{children:selectedProject.community_details})]}),selectedProject.admin_review&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Admin Review\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Action:\"}),\" \",selectedProject.admin_review.action]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Comments:\"}),\" \",selectedProject.admin_review.comments]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reviewed By:\"}),\" \",selectedProject.admin_review.reviewed_by]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reviewed At:\"}),\" \",new Date(selectedProject.admin_review.reviewed_at).toLocaleString()]})]}),selectedProject.carbon_credits&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Carbon Credits\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Credits Issued:\"}),\" \",selectedProject.carbon_credits]}),selectedProject.tokenization&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Token ID:\"}),\" \",selectedProject.tokenization.token_id]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Blockchain TX:\"}),\" \",selectedProject.tokenization.blockchain_tx]})]})]})]})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setDetailsOpen(false),children:\"Close\"})})]})]});};export default ProjectList;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}