{"ast":null,"code":"import _objectSpread from\"/Users/razashaikh/Desktop/sih/python-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Box,Container,Paper,TextField,Button,Typography,Alert,Card,CardContent,Grid,Divider,Chip,CircularProgress}from'@mui/material';import{Nature as NatureIcon,Person as UserIcon,AdminPanelSettings as AdminIcon,Login as LoginIcon,Verified as VerifiedIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({email:'',password:''});const[loading,setLoading]=useState(false);const[userType,setUserType]=useState('user');const[message,setMessage]=useState('');const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage('');try{// Handle NGO login differently\nif(userType==='ngo'){// Authenticate with NGO verification system\nconst response=await fetch('http://localhost:8002/api/3rd-party/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:formData.email,password:formData.password})});const result=await response.json();if(result.success){// Store NGO organization data\nlocalStorage.setItem('ngo_organization',JSON.stringify(result.organization));localStorage.setItem('userInfo',JSON.stringify({email:formData.email,userType:'ngo',organization:result.organization,loginTime:new Date().toISOString(),name:result.organization.name}));localStorage.setItem('auth_token',\"ngo_token_\".concat(Date.now()));setMessage(\"NGO Login successful! Welcome, \".concat(result.organization.name));// Redirect to NGO dashboard using React Router\nsetTimeout(()=>{navigate('/dashboard');},1500);}else{setMessage(\"NGO Login failed: \".concat(result.error||'Invalid credentials'));}}else{// Regular user/admin login (existing logic)\nawait new Promise(resolve=>setTimeout(resolve,1000));if(formData.email&&formData.password){const userData={email:formData.email,userType:userType,loginTime:new Date().toISOString(),name:userType==='admin'?'NCCR Administrator':'Project Manager'};localStorage.setItem('userInfo',JSON.stringify(userData));localStorage.setItem('auth_token',\"demo_token_\".concat(userType,\"_\").concat(Date.now()));setMessage(\"Login successful! Welcome, \".concat(userData.name));setTimeout(()=>{if(userType==='admin'){navigate('/admin/dashboard');}else{navigate('/dashboard');}},1000);}else{setMessage('Please enter email and password');}}}catch(error){console.error('Login error:',error);setMessage('Login failed. Please try again.');}finally{setLoading(false);}};const handleDemoLogin=demoUserType=>{setUserType(demoUserType);if(demoUserType==='admin'){setFormData({email:'admin@nccr.gov.in',password:'admin123'});}else if(demoUserType==='ngo'){setFormData({email:'verify@coastalconservation.in',password:'ngo123'});}else{setFormData({email:'user@community.org',password:'user123'});}};const userTypes=[{id:'user',title:'Community User',description:'Project creation and management',icon:/*#__PURE__*/_jsx(UserIcon,{}),color:'primary'},{id:'ngo',title:'3rd Party NGO',description:'Project verification and review',icon:/*#__PURE__*/_jsx(VerifiedIcon,{}),color:'info'},{id:'admin',title:'NCCR Admin',description:'Final approval and oversight',icon:/*#__PURE__*/_jsx(AdminIcon,{}),color:'secondary'}];return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',background:'linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)',display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{elevation:8,sx:{p:4,borderRadius:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',mb:4},children:[/*#__PURE__*/_jsx(NatureIcon,{sx:{fontSize:60,color:'#1976d2',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Blue Carbon MRV\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"textSecondary\",children:\"Monitoring, Reporting & Verification System\"})]}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Demo Login Options:\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Community User:\"}),\" Create and manage blue carbon projects\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"NGO Verifier:\"}),\" Review and verify community projects\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"NCCR Admin:\"}),\" Final approval and system oversight\"]})]}),/*#__PURE__*/_jsxs(Alert,{severity:\"warning\",sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"\\uD83D\\uDD0D DEBUG: Current Session\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{fontSize:'0.8rem'},children:[\"UserInfo: \",localStorage.getItem('userInfo')||'None',/*#__PURE__*/_jsx(\"br\",{}),\"NGO Org: \",localStorage.getItem('ngo_organization')||'None',/*#__PURE__*/_jsx(\"br\",{}),\"Auth Token: \",localStorage.getItem('auth_token')||'None']}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",sx:{mt:1},onClick:()=>{localStorage.clear();window.location.reload();},children:\"Clear Session & Reload\"})]}),message&&/*#__PURE__*/_jsx(Alert,{severity:message.includes('successful')?'success':'error',sx:{mb:3},children:message}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Select Login Type\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,sx:{mb:3},children:userTypes.map(type=>/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Card,{sx:{cursor:'pointer',border:userType===type.id?2:1,borderColor:userType===type.id?\"\".concat(type.color,\".main\"):'grey.300',backgroundColor:userType===type.id?\"\".concat(type.color,\".50\"):'background.paper','&:hover':{borderColor:\"\".concat(type.color,\".main\"),backgroundColor:\"\".concat(type.color,\".50\")}},onClick:()=>setUserType(type.id),children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',py:2},children:[/*#__PURE__*/_jsx(Box,{sx:{color:\"\".concat(type.color,\".main\"),mb:1},children:type.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",fontWeight:\"bold\",fontSize:\"0.9rem\",children:type.title}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",fontSize:\"0.75rem\",children:type.description})]})})},type.id))}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,name:\"email\",label:\"Email Address\",type:\"email\",value:formData.email,onChange:handleChange,margin:\"normal\",required:true,disabled:loading}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",value:formData.password,onChange:handleChange,margin:\"normal\",required:true,disabled:loading}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",size:\"large\",disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(LoginIcon,{}),sx:{mt:3,mb:2},children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:3},children:/*#__PURE__*/_jsx(Chip,{label:\"Quick Demo Login\"})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",color:\"primary\",onClick:()=>handleDemoLogin('user'),disabled:loading,startIcon:/*#__PURE__*/_jsx(UserIcon,{}),size:\"small\",children:\"Demo User\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",color:\"info\",onClick:()=>handleDemoLogin('ngo'),disabled:loading,startIcon:/*#__PURE__*/_jsx(VerifiedIcon,{}),size:\"small\",children:\"Demo NGO\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",color:\"secondary\",onClick:()=>handleDemoLogin('admin'),disabled:loading,startIcon:/*#__PURE__*/_jsx(AdminIcon,{}),size:\"small\",children:\"Demo Admin\"})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Box,{sx:{pl:{md:4}},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",gutterBottom:true,children:\"\\uD83C\\uDF0A India's Blue Carbon Initiative\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"Blockchain-powered MRV system for coastal ecosystem restoration\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",gutterBottom:true,children:\"\\uD83D\\uDE80 System Features\"}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:\"bold\",children:\"\\uD83D\\uDCF1 Project Management\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Create and track blue carbon restoration projects with comprehensive data collection\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:\"bold\",children:\"\\uD83E\\uDD16 AI Verification\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Automated project verification using machine learning and fraud detection\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:\"bold\",children:\"\\u26D3\\uFE0F Blockchain Integration\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Secure carbon credit tokenization on Polygon network\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:\"bold\",children:\"\\uD83C\\uDFEA Carbon Marketplace\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Trade verified carbon credits with automated payment distribution\"})]})]}),/*#__PURE__*/_jsxs(Alert,{severity:\"success\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:\"\\uD83C\\uDF0D Supporting UN SDG 14: Life Below Water\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Contributing to India's climate goals through coastal ecosystem restoration\"})]})]})})]})})});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}