{"ast":null,"code":"import _objectSpread from\"/Users/razashaikh/Desktop/sih/python-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Typography,Container,Box,Grid,Card,CardContent,Button,Alert,LinearProgress,Chip,Avatar,List,ListItem,ListItemIcon,ListItemText,Divider,Paper,IconButton,Tooltip}from'@mui/material';import{Add as AddIcon,Nature as EcoIcon,CheckCircle as CheckCircleIcon,Schedule as ScheduleIcon,PhotoCamera as PhotoIcon,LocationOn as LocationIcon,Store as MarketIcon,AccountBalance as ProjectIcon,Verified as VerifiedIcon,Payment as PaymentIcon,Notifications as NotificationIcon,Logout as LogoutIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SimpleDashboard=()=>{const navigate=useNavigate();const[userInfo,setUserInfo]=useState(null);const[dashboardData,setDashboardData]=useState({projects:[],stats:{totalProjects:0,pendingReview:0,approved:0,carbonCredits:0}});useEffect(()=>{// Get user info from localStorage\nconst storedUserInfo=localStorage.getItem('userInfo');if(storedUserInfo){setUserInfo(JSON.parse(storedUserInfo));}// Fetch dashboard data\nfetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const response=await fetch('http://localhost:8002/api/projects');const data=await response.json();// Fetch detailed status for each project\nconst projectsWithStatus=await Promise.all((data.projects||[]).map(async project=>{try{const statusResponse=await fetch(\"http://localhost:8002/api/projects/\".concat(project.id,\"/verification-status\"));const statusData=await statusResponse.json();return _objectSpread(_objectSpread({},project),{},{verification_status:statusData.success?statusData.verification_status:null});}catch(error){console.warn(\"Could not load status for project \".concat(project.id));return project;}}));setDashboardData({projects:projectsWithStatus,stats:{totalProjects:projectsWithStatus.length,pendingReview:projectsWithStatus.filter(p=>p.status==='pending_verification'||p.status==='requires_review').length,approved:projectsWithStatus.filter(p=>p.status==='approved').length,carbonCredits:projectsWithStatus.reduce((sum,p)=>sum+(p.carbon_credits||0),0),thirdPartyVerified:projectsWithStatus.filter(p=>{var _p$verification_statu,_p$verification_statu2,_p$verification_statu3;return(_p$verification_statu=p.verification_status)===null||_p$verification_statu===void 0?void 0:(_p$verification_statu2=_p$verification_statu.verification_stages)===null||_p$verification_statu2===void 0?void 0:(_p$verification_statu3=_p$verification_statu2.third_party_verification)===null||_p$verification_statu3===void 0?void 0:_p$verification_statu3.completed;}).length,blockchainRegistered:projectsWithStatus.filter(p=>{var _p$verification_statu4,_p$verification_statu5,_p$verification_statu6;return(_p$verification_statu4=p.verification_status)===null||_p$verification_statu4===void 0?void 0:(_p$verification_statu5=_p$verification_statu4.verification_stages)===null||_p$verification_statu5===void 0?void 0:(_p$verification_statu6=_p$verification_statu5.blockchain_registration)===null||_p$verification_statu6===void 0?void 0:_p$verification_statu6.completed;}).length}});}catch(error){console.error('Error fetching dashboard data:',error);}};const handleLogout=()=>{// Clear localStorage\nlocalStorage.removeItem('userInfo');localStorage.removeItem('auth_token');// Navigate to login\nnavigate('/login');};const quickActions=[{title:'Create New Project',description:'Start a new blue carbon restoration project',icon:/*#__PURE__*/_jsx(AddIcon,{}),color:'primary',action:()=>navigate('/projects/create')},{title:'Project Status Tracker',description:'Track verification pipeline progress',icon:/*#__PURE__*/_jsx(ProjectIcon,{}),color:'secondary',action:()=>window.open('http://localhost:8005','_blank')},{title:'NGO Verification Portal',description:'Access 3rd party verification system',icon:/*#__PURE__*/_jsx(VerifiedIcon,{}),color:'info',action:()=>window.open('http://localhost:8004','_blank')},{title:'Data Collection',description:'Collect field data and measurements',icon:/*#__PURE__*/_jsx(PhotoIcon,{}),color:'success',action:()=>navigate('/data-collection')},{title:'Marketplace',description:'Trade carbon credits',icon:/*#__PURE__*/_jsx(MarketIcon,{}),color:'warning',action:()=>navigate('/marketplace')},{title:'Carbon Credits',description:'Manage tokenized carbon credits',icon:/*#__PURE__*/_jsx(VerifiedIcon,{}),color:'info',action:()=>navigate('/carbon-credits')},{title:'Payments',description:'Transfer blockchain carbon credits',icon:/*#__PURE__*/_jsx(PaymentIcon,{}),color:'success',action:()=>navigate('/payments')},{title:'Reports',description:'View detailed analytics and reports',icon:/*#__PURE__*/_jsx(LocationIcon,{}),color:'success',action:()=>navigate('/reports')}];const recentActivities=[{title:'NGO Verification System Launched',description:'3rd party verification portal now available for organizations',time:'1 hour ago',icon:/*#__PURE__*/_jsx(VerifiedIcon,{color:\"primary\"})},{title:'Project Status Tracker Active',description:'Real-time verification pipeline tracking now available',time:'2 hours ago',icon:/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"success\"})},{title:'Blockchain Integration Live',description:'Live project registration on Polygon Amoy testnet operational',time:'3 hours ago',icon:/*#__PURE__*/_jsx(LocationIcon,{color:\"info\"})},{title:'AI Verification Enhanced',description:'Enhanced AI verification with fraud detection active',time:'4 hours ago',icon:/*#__PURE__*/_jsx(VerifiedIcon,{color:\"secondary\"})}];return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{mt:2,mb:4},children:[/*#__PURE__*/_jsx(Box,{sx:{mb:4},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:2},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",gutterBottom:true,children:\"\\uD83C\\uDF0A Welcome to Blue Carbon MRV\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:userInfo?\"Hello, \".concat(userInfo.email):'Community Dashboard'}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"textSecondary\",children:\"Monitor, Report, and Verify your coastal ecosystem restoration projects\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",startIcon:/*#__PURE__*/_jsx(LogoutIcon,{}),onClick:handleLogout,sx:{ml:2},children:\"Logout\"})]})}),/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:3},children:\"\\uD83D\\uDD17 System Status: All services operational | Backend: Connected | AI Verification: Active\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'primary.main',mr:2},children:/*#__PURE__*/_jsx(ProjectIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Total Projects\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.totalProjects})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'warning.main',mr:2},children:/*#__PURE__*/_jsx(ScheduleIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Pending Review\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.pendingReview})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'info.main',mr:2},children:/*#__PURE__*/_jsx(VerifiedIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"NGO Verified\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.thirdPartyVerified||0})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'success.main',mr:2},children:/*#__PURE__*/_jsx(CheckCircleIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Approved\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.approved})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'purple',mr:2},children:\"\\u26D3\\uFE0F\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Blockchain\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.blockchainRegistered||0})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'secondary.main',mr:2},children:/*#__PURE__*/_jsx(EcoIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Carbon Credits\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:dashboardData.stats.carbonCredits})]})]})})})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"\\uD83D\\uDE80 Quick Actions\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:quickActions.map((action,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(Card,{sx:{cursor:'pointer','&:hover':{transform:'translateY(-2px)',boxShadow:3},transition:'all 0.2s'},onClick:action.action,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:\"\".concat(action.color,\".main\"),mr:2},children:action.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:action.title})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:action.description})]})})},index))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"\\uD83D\\uDCCB Recent Activity\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"Notifications\",children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(NotificationIcon,{})})})]}),/*#__PURE__*/_jsx(List,{children:recentActivities.map((activity,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{sx:{px:0},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:activity.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:activity.title,secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:activity.description}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:activity.time})]})})]}),index<recentActivities.length-1&&/*#__PURE__*/_jsx(Divider,{})]},index))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"\\uD83C\\uDF31 Recent Projects\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>navigate('/projects/create'),children:\"Create New Project\"})]}),dashboardData.projects.length===0?/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"No projects found. Create your first blue carbon restoration project to get started!\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:dashboardData.projects.slice(0,6).map(project=>{var _stages$ai_verificati,_stages$third_party_v,_stages$admin_review,_stages$blockchain_re,_project$status,_stages$ai_verificati2,_stages$ai_verificati3,_stages$third_party_v2,_stages$third_party_v3,_stages$admin_review2,_stages$admin_review3,_stages$blockchain_re2,_stages$blockchain_re3,_stages$blockchain_re4,_stages$third_party_v4;const verificationStatus=project.verification_status;const stages=(verificationStatus===null||verificationStatus===void 0?void 0:verificationStatus.verification_stages)||{};// Calculate progress percentage\nlet progress=0;if((_stages$ai_verificati=stages.ai_verification)!==null&&_stages$ai_verificati!==void 0&&_stages$ai_verificati.completed)progress+=25;if((_stages$third_party_v=stages.third_party_verification)!==null&&_stages$third_party_v!==void 0&&_stages$third_party_v.completed)progress+=25;if((_stages$admin_review=stages.admin_review)!==null&&_stages$admin_review!==void 0&&_stages$admin_review.completed)progress+=25;if((_stages$blockchain_re=stages.blockchain_registration)!==null&&_stages$blockchain_re!==void 0&&_stages$blockchain_re.completed)progress+=25;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{height:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:project.project_name||'Unnamed Project'}),/*#__PURE__*/_jsx(Chip,{label:(_project$status=project.status)===null||_project$status===void 0?void 0:_project$status.replace('_',' ').toUpperCase(),color:project.status==='approved'?'success':'warning',size:\"small\",sx:{mb:2}}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[\"Verification Progress: \",progress,\"%\"]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:progress,sx:{height:8,borderRadius:1}})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",display:\"block\",children:\"Pipeline Status:\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:0.5,mt:1},children:[/*#__PURE__*/_jsx(Chip,{label:\"AI\",size:\"small\",color:(_stages$ai_verificati2=stages.ai_verification)!==null&&_stages$ai_verificati2!==void 0&&_stages$ai_verificati2.completed?'success':'default',variant:(_stages$ai_verificati3=stages.ai_verification)!==null&&_stages$ai_verificati3!==void 0&&_stages$ai_verificati3.completed?'filled':'outlined'}),/*#__PURE__*/_jsx(Chip,{label:\"NGO\",size:\"small\",color:(_stages$third_party_v2=stages.third_party_verification)!==null&&_stages$third_party_v2!==void 0&&_stages$third_party_v2.completed?'success':'default',variant:(_stages$third_party_v3=stages.third_party_verification)!==null&&_stages$third_party_v3!==void 0&&_stages$third_party_v3.completed?'filled':'outlined'}),/*#__PURE__*/_jsx(Chip,{label:\"Admin\",size:\"small\",color:(_stages$admin_review2=stages.admin_review)!==null&&_stages$admin_review2!==void 0&&_stages$admin_review2.completed?'success':'default',variant:(_stages$admin_review3=stages.admin_review)!==null&&_stages$admin_review3!==void 0&&_stages$admin_review3.completed?'filled':'outlined'}),/*#__PURE__*/_jsx(Chip,{label:\"\\u26D3\\uFE0F\",size:\"small\",color:(_stages$blockchain_re2=stages.blockchain_registration)!==null&&_stages$blockchain_re2!==void 0&&_stages$blockchain_re2.completed?'success':'default',variant:(_stages$blockchain_re3=stages.blockchain_registration)!==null&&_stages$blockchain_re3!==void 0&&_stages$blockchain_re3.completed?'filled':'outlined'})]})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ecosystem:\"}),\" \",project.ecosystem_type]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",project.area_hectares,\" hectares\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"AI Score:\"}),\" \",project.verification_score||0,\"/100\"]}),((_stages$blockchain_re4=stages.blockchain_registration)===null||_stages$blockchain_re4===void 0?void 0:_stages$blockchain_re4.completed)&&/*#__PURE__*/_jsx(Box,{sx:{mt:2,p:1,bgcolor:'success.light',borderRadius:1},children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"success.dark\",children:\"\\u2705 Blockchain Registered\"})}),((_stages$third_party_v4=stages.third_party_verification)===null||_stages$third_party_v4===void 0?void 0:_stages$third_party_v4.organization)&&/*#__PURE__*/_jsx(Box,{sx:{mt:1,p:1,bgcolor:'info.light',borderRadius:1},children:/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"info.dark\",children:[\"\\uD83C\\uDFE2 Verified by: \",stages.third_party_verification.organization]})})]})})},project.id);})})]})})]})]});};export default SimpleDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}