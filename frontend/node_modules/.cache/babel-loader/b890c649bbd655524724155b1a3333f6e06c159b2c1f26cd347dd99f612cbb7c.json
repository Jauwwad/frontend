{"ast":null,"code":"import _objectSpread from\"/Users/razashaikh/Desktop/sih/python-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useCallback}from'react';import{useNavigate}from'react-router-dom';import{Typography,Box,TextField,Button,Grid,MenuItem,Stepper,Step,StepLabel,Card,CardContent,Alert,CircularProgress,Paper,IconButton,Chip,Divider,List,ListItem,ListItemText,ListItemIcon,Dialog,DialogTitle,DialogContent,DialogActions,FormControl,InputLabel,Select,InputAdornment,LinearProgress}from'@mui/material';import{PhotoCamera,VideoCall,GpsFixed,CloudUpload,Delete,Preview,Nature,Water,Thermostat,Speed,Analytics,Storage}from'@mui/icons-material';import{MapContainer,TileLayer,Marker,useMapEvents}from'react-leaflet';import{projectAPI,handleAPIError}from'../services/api';import{useSnackbar}from'notistack';import BlockchainStatus from'../components/BlockchainStatus';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LocationPicker=_ref=>{let{position,setPosition}=_ref;useMapEvents({click(e){setPosition({lat:e.latlng.lat,lng:e.latlng.lng});}});return position?/*#__PURE__*/_jsx(Marker,{position:[position.lat,position.lng]}):null;};const ProjectCreate=()=>{var _previewDialog$file$l,_previewDialog$file$l2;const navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const[activeStep,setActiveStep]=useState(0);const[loading,setLoading]=useState(false);const[uploadProgress,setUploadProgress]=useState(0);const[isUploading,setIsUploading]=useState(false);const[previewDialog,setPreviewDialog]=useState({open:false,file:null});const[submissionResult,setSubmissionResult]=useState(null);const[showBlockchainStatus,setShowBlockchainStatus]=useState(false);// File input refs\nconst photoInputRef=useRef(null);const videoInputRef=useRef(null);const documentInputRef=useRef(null);const[formData,setFormData]=useState({// Basic project info\nproject_name:'',location:{lat:19.0760,lng:72.8777},// Default to Mumbai\narea_hectares:'',ecosystem_type:'',restoration_method:'',community_details:'',contact_email:'',phone_number:'',// Media files with geo-tagging\nmedia_files:{photos:[],videos:[],documents:[]},// Field measurements\nfield_measurements:{water_quality:{ph_level:'',salinity:'',temperature:'',dissolved_oxygen:''},soil_analysis:{carbon_content:'',nitrogen_level:'',phosphorus_level:'',moisture_content:''},biodiversity:{species_count:'',vegetation_density:'',wildlife_observations:''},environmental:{tide_level:'',weather_conditions:'',visibility:''}},// GPS tracking\ngps_data:{waypoints:[],track_log:[],boundary_coordinates:[]},// IPFS and blockchain\nipfs_hashes:[],blockchain_tx_hash:''});const ecosystemTypes=['mangrove','seagrass','salt_marsh','coastal_wetland','coral_reef','mudflat'];const restorationMethods=['Natural regeneration','Assisted regeneration','Active restoration','Hybrid approach','Community-based restoration','Scientific intervention'];const steps=['Project Details','Location & GPS','Media Upload','Field Measurements','Community Info','Blockchain & IPFS','Review & Submit'];// Get current GPS location\nconst getCurrentLocation=useCallback(()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const newLocation={lat:position.coords.latitude,lng:position.coords.longitude};setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:newLocation}));enqueueSnackbar('Location updated successfully!',{variant:'success'});},error=>{enqueueSnackbar('Unable to get current location',{variant:'warning'});},{enableHighAccuracy:true});}else{enqueueSnackbar('Geolocation is not supported by this browser',{variant:'error'});}},[enqueueSnackbar]);// Add GPS waypoint\nconst addWaypoint=useCallback(()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const waypoint={id:Date.now(),lat:position.coords.latitude,lng:position.coords.longitude,timestamp:new Date().toISOString(),accuracy:position.coords.accuracy};setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{gps_data:_objectSpread(_objectSpread({},prev.gps_data),{},{waypoints:[...prev.gps_data.waypoints,waypoint]})}));enqueueSnackbar('Waypoint added successfully!',{variant:'success'});},error=>{enqueueSnackbar('Unable to get GPS location for waypoint',{variant:'warning'});},{enableHighAccuracy:true});}},[enqueueSnackbar]);// Handle file upload with geo-tagging and real IPFS upload\nconst handleFileUpload=async(files,type)=>{setIsUploading(true);setUploadProgress(0);const uploadedFiles=[];for(let i=0;i<files.length;i++){const file=files[i];// Get current location for geo-tagging\nconst location=await new Promise(resolve=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>resolve({lat:position.coords.latitude,lng:position.coords.longitude,accuracy:position.coords.accuracy}),()=>resolve(formData.location)// Fallback to manual location\n);}else{resolve(formData.location);}});try{// Upload file to IPFS immediately\nconst ipfsResult=await uploadToIPFS(file,type,location);const fileData={id:Date.now()+i,file,name:file.name,size:file.size,type:file.type,lastModified:file.lastModified,location,timestamp:new Date().toISOString(),ipfs_hash:ipfsResult.ipfs_hash,gateway_url:ipfsResult.gateway_url,description:\"\".concat(type,\" uploaded from project creation\")};uploadedFiles.push(fileData);setUploadProgress((i+1)/files.length*100);}catch(error){console.error('IPFS upload failed for file:',file.name,error);enqueueSnackbar(\"Failed to upload \".concat(file.name,\" to IPFS\"),{variant:'error'});}}if(uploadedFiles.length>0){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{media_files:_objectSpread(_objectSpread({},prev.media_files),{},{[type]:[...prev.media_files[type],...uploadedFiles]})}));enqueueSnackbar(\"\".concat(uploadedFiles.length,\" \").concat(type,\" uploaded to IPFS successfully!\"),{variant:'success'});}setIsUploading(false);setUploadProgress(0);};// Upload to IPFS using our backend API\nconst uploadToIPFS=async(file,fileType,location)=>{const uploadFormData=new FormData();uploadFormData.append('file',file);uploadFormData.append('file_type',fileType);uploadFormData.append('description',\"\".concat(fileType,\" uploaded from project creation\"));// Add location metadata if available\nif(location){uploadFormData.append('metadata',JSON.stringify({location,ecosystem_type:formData.ecosystem_type,uploaded_from:'project_creation'}));}const response=await fetch('http://localhost:8002/api/ipfs/upload',{method:'POST',body:uploadFormData});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||'IPFS upload failed');}const result=await response.json();if(result.status!=='success'){throw new Error(result.message||'IPFS upload failed');}return{ipfs_hash:result.ipfs_hash,gateway_url:result.gateway_url,size:result.size};};// Remove uploaded file\nconst removeFile=(type,fileId)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{media_files:_objectSpread(_objectSpread({},prev.media_files),{},{[type]:prev.media_files[type].filter(file=>file.id!==fileId)})}));enqueueSnackbar('File removed successfully',{variant:'info'});};const handleInputChange=field=>event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:event.target.value}));};const handleNestedInputChange=(section,field)=>event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[section]:_objectSpread(_objectSpread({},prev[section]),{},{[field]:event.target.value})}));};const handleDeepNestedInputChange=(section,subsection,field)=>event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[section]:_objectSpread(_objectSpread({},prev[section]),{},{[subsection]:_objectSpread(_objectSpread({},prev[section][subsection]),{},{[field]:event.target.value})})}));};const handleLocationChange=newPosition=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:newPosition}));};const validateStep=step=>{switch(step){case 0:// Project Details\nreturn formData.project_name&&formData.ecosystem_type&&formData.restoration_method;case 1:// Location & GPS\nreturn formData.area_hectares&&formData.location.lat&&formData.location.lng;case 2:// Media Upload\nreturn formData.media_files.photos.length>0||formData.media_files.videos.length>0||formData.media_files.documents.length>0;case 3:// Field Measurements\nreturn formData.field_measurements.water_quality.ph_level||formData.field_measurements.soil_analysis.carbon_content||formData.field_measurements.biodiversity.species_count;case 4:// Community Info\nreturn formData.community_details&&formData.contact_email&&formData.phone_number;case 5:// Blockchain & IPFS\nreturn true;// Optional step\ndefault:return true;}};const handleNext=()=>{if(validateStep(activeStep)){setActiveStep(prev=>prev+1);}else{enqueueSnackbar('Please fill in required fields or add necessary data',{variant:'warning'});}};const handleBack=()=>{setActiveStep(prev=>prev-1);};const handleSubmit=async()=>{try{setLoading(true);// Collect IPFS hashes from already uploaded files\nconst ipfsHashes=[];for(const type in formData.media_files){for(const fileData of formData.media_files[type]){if(fileData.ipfs_hash){ipfsHashes.push({hash:fileData.ipfs_hash,type,filename:fileData.name,location:fileData.location,timestamp:fileData.timestamp,gateway_url:fileData.gateway_url,size:fileData.size,description:fileData.description});}}}const projectData=_objectSpread(_objectSpread({},formData),{},{area_hectares:parseFloat(formData.area_hectares),ipfs_hashes:ipfsHashes,submission_timestamp:new Date().toISOString(),status:'pending_verification',verification_score:0});const response=await projectAPI.create(projectData);// Store the enhanced response data\nsetSubmissionResult(response);setShowBlockchainStatus(true);enqueueSnackbar(\"Project submitted successfully! Your project is now under review.\",{variant:'success',autoHideDuration:6000});// Navigate to dashboard after a short delay to show confirmation\nsetTimeout(()=>{navigate('/dashboard');},3000);}catch(error){const errorInfo=handleAPIError(error);enqueueSnackbar(errorInfo.message,{variant:'error'});}finally{setLoading(false);}};const renderStepContent=()=>{switch(activeStep){case 0:// Project Details\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Project Name\",value:formData.project_name,onChange:handleInputChange('project_name'),required:true,placeholder:\"e.g., Coastal Mangrove Restoration Project\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,select:true,label:\"Ecosystem Type\",value:formData.ecosystem_type,onChange:handleInputChange('ecosystem_type'),required:true,children:ecosystemTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type,children:type.charAt(0).toUpperCase()+type.slice(1).replace('_',' ')},type))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,select:true,label:\"Restoration Method\",value:formData.restoration_method,onChange:handleInputChange('restoration_method'),required:true,children:restorationMethods.map(method=>/*#__PURE__*/_jsx(MenuItem,{value:method,children:method},method))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Blue Carbon MRV System:\"}),\" Your project will undergo AI/ML verification, NCCR review, and blockchain tokenization for carbon credit generation.\"]})})})]});case 1:// Location & GPS\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Area (Hectares)\",value:formData.area_hectares,onChange:handleInputChange('area_hectares'),required:true,inputProps:{min:0,step:0.1}}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"\\uD83D\\uDCCD Current Location: \",formData.location.lat.toFixed(6),\", \",formData.location.lng.toFixed(6)]}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(GpsFixed,{}),onClick:getCurrentLocation,variant:\"outlined\",size:\"small\",sx:{mt:1},children:\"Use Current GPS Location\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"GPS Waypoints\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(GpsFixed,{}),onClick:addWaypoint,variant:\"contained\",size:\"small\",sx:{mb:2},children:\"Add Current Waypoint\"}),/*#__PURE__*/_jsx(List,{dense:true,children:formData.gps_data.waypoints.map((waypoint,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(GpsFixed,{color:\"primary\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Waypoint \".concat(index+1),secondary:\"\".concat(waypoint.lat.toFixed(6),\", \").concat(waypoint.lng.toFixed(6),\" (\\xB1\").concat(waypoint.accuracy,\"m)\")})]},waypoint.id))})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Box,{sx:{height:400,border:'1px solid #ccc',borderRadius:1},children:/*#__PURE__*/_jsxs(MapContainer,{center:[formData.location.lat,formData.location.lng],zoom:13,style:{height:'100%',width:'100%'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),/*#__PURE__*/_jsx(LocationPicker,{position:formData.location,setPosition:handleLocationChange}),formData.gps_data.waypoints.map(waypoint=>/*#__PURE__*/_jsx(Marker,{position:[waypoint.lat,waypoint.lng]},waypoint.id))]})}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",sx:{mt:1,display:'block'},children:\"Click on the map to set project location. Add GPS waypoints for area boundaries.\"})]})]});case 2:// Media Upload\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCF8 Upload Geo-Tagged Media Evidence\"}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:2},children:\"All uploaded files will be automatically geo-tagged with GPS coordinates and timestamped for verification.\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83D\\uDCF7 Photos\"}),/*#__PURE__*/_jsx(\"input\",{ref:photoInputRef,type:\"file\",multiple:true,accept:\"image/*\",style:{display:'none'},onChange:e=>handleFileUpload(e.target.files,'photos')}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(PhotoCamera,{}),onClick:()=>{var _photoInputRef$curren;return(_photoInputRef$curren=photoInputRef.current)===null||_photoInputRef$curren===void 0?void 0:_photoInputRef$curren.click();},variant:\"outlined\",fullWidth:true,sx:{mb:2},children:\"Add Photos\"}),formData.media_files.photos.map(photo=>/*#__PURE__*/_jsx(Chip,{label:photo.name,onDelete:()=>removeFile('photos',photo.id),color:\"primary\",variant:\"outlined\",size:\"small\",sx:{m:0.5}},photo.id))]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83C\\uDFA5 Videos\"}),/*#__PURE__*/_jsx(\"input\",{ref:videoInputRef,type:\"file\",multiple:true,accept:\"video/*\",style:{display:'none'},onChange:e=>handleFileUpload(e.target.files,'videos')}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(VideoCall,{}),onClick:()=>{var _videoInputRef$curren;return(_videoInputRef$curren=videoInputRef.current)===null||_videoInputRef$curren===void 0?void 0:_videoInputRef$curren.click();},variant:\"outlined\",fullWidth:true,sx:{mb:2},children:\"Add Videos\"}),formData.media_files.videos.map(video=>/*#__PURE__*/_jsx(Chip,{label:video.name,onDelete:()=>removeFile('videos',video.id),color:\"secondary\",variant:\"outlined\",size:\"small\",sx:{m:0.5}},video.id))]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83D\\uDCC4 Documents\"}),/*#__PURE__*/_jsx(\"input\",{ref:documentInputRef,type:\"file\",multiple:true,accept:\".pdf,.doc,.docx,.txt\",style:{display:'none'},onChange:e=>handleFileUpload(e.target.files,'documents')}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(CloudUpload,{}),onClick:()=>{var _documentInputRef$cur;return(_documentInputRef$cur=documentInputRef.current)===null||_documentInputRef$cur===void 0?void 0:_documentInputRef$cur.click();},variant:\"outlined\",fullWidth:true,sx:{mb:2},children:\"Add Documents\"}),formData.media_files.documents.map(doc=>/*#__PURE__*/_jsx(Chip,{label:doc.name,onDelete:()=>removeFile('documents',doc.id),color:\"warning\",variant:\"outlined\",size:\"small\",sx:{m:0.5}},doc.id))]})}),isUploading&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{width:'100%'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Uploading files... \",uploadProgress.toFixed(0),\"%\"]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:uploadProgress})]})})]});case 3:// Field Measurements\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83E\\uDDEA Scientific Field Measurements\"}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:2},children:\"Enter available field measurements. These will be verified against satellite data and used for carbon credit calculations.\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,startIcon:/*#__PURE__*/_jsx(Water,{}),children:\"\\uD83D\\uDCA7 Water Quality\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"pH Level\",value:formData.field_measurements.water_quality.ph_level,onChange:handleDeepNestedInputChange('field_measurements','water_quality','ph_level'),inputProps:{min:0,max:14,step:0.1},InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"pH\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Salinity\",value:formData.field_measurements.water_quality.salinity,onChange:handleDeepNestedInputChange('field_measurements','water_quality','salinity'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"ppt\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Temperature\",value:formData.field_measurements.water_quality.temperature,onChange:handleDeepNestedInputChange('field_measurements','water_quality','temperature'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"\\xB0C\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Dissolved Oxygen\",value:formData.field_measurements.water_quality.dissolved_oxygen,onChange:handleDeepNestedInputChange('field_measurements','water_quality','dissolved_oxygen'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"mg/L\"})}})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83C\\uDF31 Soil Analysis\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Carbon Content\",value:formData.field_measurements.soil_analysis.carbon_content,onChange:handleDeepNestedInputChange('field_measurements','soil_analysis','carbon_content'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"%\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Nitrogen Level\",value:formData.field_measurements.soil_analysis.nitrogen_level,onChange:handleDeepNestedInputChange('field_measurements','soil_analysis','nitrogen_level'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"%\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Phosphorus Level\",value:formData.field_measurements.soil_analysis.phosphorus_level,onChange:handleDeepNestedInputChange('field_measurements','soil_analysis','phosphorus_level'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"ppm\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Moisture Content\",value:formData.field_measurements.soil_analysis.moisture_content,onChange:handleDeepNestedInputChange('field_measurements','soil_analysis','moisture_content'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"%\"})}})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83E\\uDD8B Biodiversity Assessment\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Species Count\",value:formData.field_measurements.biodiversity.species_count,onChange:handleDeepNestedInputChange('field_measurements','biodiversity','species_count'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"species\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"Vegetation Density\",value:formData.field_measurements.biodiversity.vegetation_density,onChange:handleDeepNestedInputChange('field_measurements','biodiversity','vegetation_density'),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"%\"})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,label:\"Wildlife Observations\",value:formData.field_measurements.biodiversity.wildlife_observations,onChange:handleDeepNestedInputChange('field_measurements','biodiversity','wildlife_observations'),placeholder:\"Describe observed wildlife...\"})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"\\uD83C\\uDF0A Environmental Conditions\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Tide Level\",value:formData.field_measurements.environmental.tide_level,onChange:handleDeepNestedInputChange('field_measurements','environmental','tide_level'),select:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"low\",children:\"Low Tide\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"medium\",children:\"Medium Tide\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"high\",children:\"High Tide\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Weather\",value:formData.field_measurements.environmental.weather_conditions,onChange:handleDeepNestedInputChange('field_measurements','environmental','weather_conditions'),select:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"sunny\",children:\"Sunny\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"cloudy\",children:\"Cloudy\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"rainy\",children:\"Rainy\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"stormy\",children:\"Stormy\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Visibility\",value:formData.field_measurements.environmental.visibility,onChange:handleDeepNestedInputChange('field_measurements','environmental','visibility'),select:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"excellent\",children:\"Excellent (>10km)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"good\",children:\"Good (5-10km)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"moderate\",children:\"Moderate (2-5km)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"poor\",children:\"Poor (<2km)\"})]})})]})]})})]});case 4:// Community Info\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDC65 Community Information\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:4,label:\"Community Details\",value:formData.community_details,onChange:handleInputChange('community_details'),required:true,placeholder:\"Describe the local communities involved, their role, expected benefits, and how they will participate in the restoration project...\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"email\",label:\"Contact Email\",value:formData.contact_email,onChange:handleInputChange('contact_email'),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Phone Number\",value:formData.phone_number,onChange:handleInputChange('phone_number'),required:true,placeholder:\"+91 XXXXX XXXXX\"})})]});case 5:// Blockchain & IPFS\nreturn/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u26D3\\uFE0F Blockchain & IPFS Integration\"}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:2},children:\"Your project data will be stored on IPFS for decentralized storage and recorded on the blockchain for immutable verification.\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[/*#__PURE__*/_jsx(Storage,{sx:{mr:1}}),\"IPFS Storage Status\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Chip,{label:\"Photos Ready\",color:\"success\",size:\"small\",sx:{mr:1}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[formData.media_files.photos.length,\" files\"]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Chip,{label:\"Videos Ready\",color:\"success\",size:\"small\",sx:{mr:1}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[formData.media_files.videos.length,\" files\"]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Chip,{label:\"Documents Ready\",color:\"success\",size:\"small\",sx:{mr:1}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[formData.media_files.documents.length,\" files\"]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[/*#__PURE__*/_jsx(Analytics,{sx:{mr:1}}),\"Blockchain Integration\"]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Network: Polygon Mumbai Testnet\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Contract: ProjectRegistry.sol\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Gas Estimate: ~0.05 MATIC\"})]}),/*#__PURE__*/_jsx(Alert,{severity:\"success\",children:\"Ready for blockchain submission\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Next Steps After Submission:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"1. \\uD83E\\uDD16 AI/ML verification of uploaded media and measurements\",/*#__PURE__*/_jsx(\"br\",{}),\"2. \\uD83D\\uDC69\\u200D\\uD83D\\uDCBC NCCR admin review and validation\",/*#__PURE__*/_jsx(\"br\",{}),\"3. \\u2705 Project approval and registration\",/*#__PURE__*/_jsx(\"br\",{}),\"4. \\uD83E\\uDE99 Carbon credit tokenization\",/*#__PURE__*/_jsx(\"br\",{}),\"5. \\uD83D\\uDCB0 Revenue sharing with community\"]})})]});case 6:// Review & Submit\nreturn/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:3},children:\"Please review your project details before submission. Once submitted, the project will undergo AI verification, NCCR review, and blockchain registration.\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCCB Project Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",formData.project_name]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ecosystem:\"}),\" \",formData.ecosystem_type]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",formData.restoration_method]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Area:\"}),\" \",formData.area_hectares,\" hectares\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",formData.location.lat.toFixed(4),\", \",formData.location.lng.toFixed(4)]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCDE Contact Information\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",formData.contact_email]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",formData.phone_number]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"GPS Waypoints:\"}),\" \",formData.gps_data.waypoints.length]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCF1 Media Files\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Photos:\"}),\" \",formData.media_files.photos.length]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Videos:\"}),\" \",formData.media_files.videos.length]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Documents:\"}),\" \",formData.media_files.documents.length]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83E\\uDDEA Field Data\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Water Quality:\"}),\" \",formData.field_measurements.water_quality.ph_level?'✅':'❌',\" pH Level\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Soil Analysis:\"}),\" \",formData.field_measurements.soil_analysis.carbon_content?'✅':'❌',\" Carbon Content\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Biodiversity:\"}),\" \",formData.field_measurements.biodiversity.species_count?'✅':'❌',\" Species Count\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Environmental:\"}),\" \",formData.field_measurements.environmental.weather_conditions?'✅':'❌',\" Weather Data\"]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDC65 Community Details\"}),/*#__PURE__*/_jsx(Typography,{children:formData.community_details})]})]})]});default:return null;}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\uD83C\\uDF0A Create New Blue Carbon Project\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"textSecondary\",gutterBottom:true,sx:{mb:3},children:\"Submit your coastal ecosystem restoration project for AI verification, NCCR review, and blockchain tokenization\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,sx:{mb:4},alternativeLabel:true,children:steps.map(label=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label))}),renderStepContent(),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mt:4},children:[/*#__PURE__*/_jsx(Button,{disabled:activeStep===0,onClick:handleBack,variant:\"outlined\",children:\"Back\"}),/*#__PURE__*/_jsx(Box,{children:activeStep===steps.length-1?/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(CloudUpload,{}),size:\"large\",children:loading?'Uploading to IPFS & Blockchain...':'Submit Project for Verification'}):/*#__PURE__*/_jsxs(Button,{variant:\"contained\",onClick:handleNext,disabled:!validateStep(activeStep),size:\"large\",children:[\"Next: \",steps[activeStep+1]]})})]})]})}),showBlockchainStatus&&submissionResult&&/*#__PURE__*/_jsxs(Box,{mt:3,children:[/*#__PURE__*/_jsx(BlockchainStatus,{projectData:submissionResult,aiAnalysis:submissionResult.ai_analysis,blockchainData:submissionResult.blockchain}),/*#__PURE__*/_jsxs(Box,{mt:2,display:\"flex\",justifyContent:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate('/dashboard'),children:\"Back to Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>{setShowBlockchainStatus(false);setSubmissionResult(null);setActiveStep(0);setFormData({project_name:'',location:{lat:19.0760,lng:72.8777},area_hectares:'',ecosystem_type:'',restoration_method:'',community_details:'',contact_email:'',phone_number:'',media_files:{photos:[],videos:[],documents:[]}});},children:\"Create Another Project\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:previewDialog.open,onClose:()=>setPreviewDialog({open:false,file:null}),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"File Preview\"}),/*#__PURE__*/_jsx(DialogContent,{children:previewDialog.file&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"\\uD83D\\uDCCD Location: \",(_previewDialog$file$l=previewDialog.file.location)===null||_previewDialog$file$l===void 0?void 0:_previewDialog$file$l.lat,\", \",(_previewDialog$file$l2=previewDialog.file.location)===null||_previewDialog$file$l2===void 0?void 0:_previewDialog$file$l2.lng]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"\\uD83D\\uDD52 Timestamp: \",new Date(previewDialog.file.timestamp).toLocaleString()]})]})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setPreviewDialog({open:false,file:null}),children:\"Close\"})})]})]});};export default ProjectCreate;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}