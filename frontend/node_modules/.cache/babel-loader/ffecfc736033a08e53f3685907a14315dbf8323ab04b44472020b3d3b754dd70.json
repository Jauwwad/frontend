{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Box,Container,Typography,Grid,Card,CardContent,AppBar,Toolbar,IconButton,Menu,MenuItem,LinearProgress,Paper,Avatar,List,ListItem,ListItemIcon,ListItemText,Divider,Chip,Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from'@mui/material';import{AdminPanelSettings as AdminIcon,AccountCircle as AccountIcon,TrendingUp as TrendingUpIcon,Nature as NatureIcon,LocationOn as LocationIcon,Schedule as ScheduleIcon,CheckCircle as CheckCircleIcon,Warning as WarningIcon,Assessment as AssessmentIcon,ArrowBack as ArrowBackIcon,Nature as EcoIcon,Water as WaterIcon,Waves as WavesIcon,Grass as GrassIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import{useSnackbar}from'notistack';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminAnalytics=()=>{const navigate=useNavigate();const{user,logout}=useAuth();const{enqueueSnackbar}=useSnackbar();const[anchorEl,setAnchorEl]=useState(null);const[analytics,setAnalytics]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchAnalytics();},[]);const fetchAnalytics=async()=>{try{const response=await fetch('http://localhost:8002/api/admin/analytics');const data=await response.json();if(data.status==='success'){setAnalytics(data);}}catch(error){console.error('Error fetching analytics:',error);enqueueSnackbar('Failed to load analytics',{variant:'error'});}finally{setLoading(false);}};const handleMenuOpen=event=>{setAnchorEl(event.currentTarget);};const handleMenuClose=()=>{setAnchorEl(null);};const handleLogout=()=>{logout();navigate('/');enqueueSnackbar('Logged out successfully',{variant:'success'});};const getEcosystemIcon=type=>{switch(type){case'mangrove':return/*#__PURE__*/_jsx(NatureIcon,{sx:{color:'#4caf50'}});case'seagrass':return/*#__PURE__*/_jsx(GrassIcon,{sx:{color:'#8bc34a'}});case'saltmarsh':return/*#__PURE__*/_jsx(WaterIcon,{sx:{color:'#2196f3'}});case'coastal_wetland':return/*#__PURE__*/_jsx(WavesIcon,{sx:{color:'#03a9f4'}});default:return/*#__PURE__*/_jsx(EcoIcon,{sx:{color:'#607d8b'}});}};const getStatusColor=status=>{switch(status){case'approved':return'success';case'rejected':return'error';case'pending_verification':return'warning';case'requires_review':return'info';default:return'default';}};if(loading){return/*#__PURE__*/_jsx(Box,{sx:{width:'100%',mt:2},children:/*#__PURE__*/_jsx(LinearProgress,{})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:()=>navigate('/admin'),sx:{mr:2},children:/*#__PURE__*/_jsx(ArrowBackIcon,{})}),/*#__PURE__*/_jsx(AdminIcon,{sx:{mr:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"NCCR - Analytics Dashboard\"}),/*#__PURE__*/_jsx(IconButton,{size:\"large\",edge:\"end\",\"aria-label\":\"account\",onClick:handleMenuOpen,color:\"inherit\",children:/*#__PURE__*/_jsx(AccountIcon,{})}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:()=>navigate('/admin'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:()=>navigate('/admin/projects'),children:\"Projects\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleLogout,children:\"Logout\"})]})]})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:3,mb:4,background:'linear-gradient(45deg, #e8f5e8, #f3e5f5)'},children:/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Avatar,{sx:{width:60,height:60,bgcolor:'primary.main'},children:/*#__PURE__*/_jsx(AssessmentIcon,{})})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\uD83D\\uDCCA Blue Carbon Analytics Center\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"textSecondary\",children:\"Comprehensive insights into India's blue carbon restoration program\"})]})]})}),analytics&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(NatureIcon,{sx:{fontSize:40,color:'primary.main',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"primary\",children:analytics.total_projects}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Total Projects Registered\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(CheckCircleIcon,{sx:{fontSize:40,color:'success.main',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:analytics.approved_projects}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"NCCR Approved Projects\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(LocationIcon,{sx:{fontSize:40,color:'info.main',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"info.main\",children:analytics.total_area_hectares.toFixed(1)}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Total Area (Hectares)\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(TrendingUpIcon,{sx:{fontSize:40,color:'secondary.main',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"secondary.main\",children:analytics.total_carbon_credits.toFixed(0)}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Carbon Credits (tCO\\u2082)\"})]})})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83C\\uDF0A Ecosystem Distribution\"}),/*#__PURE__*/_jsx(List,{children:analytics.ecosystem_breakdown.map((ecosystem,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:getEcosystemIcon(ecosystem.ecosystem_type)}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{textTransform:'capitalize'},children:ecosystem.ecosystem_type.replace('_',' ')}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat(ecosystem.count,\" projects\"),color:\"primary\",variant:\"outlined\",size:\"small\"})]}),secondary:/*#__PURE__*/_jsxs(Box,{sx:{mt:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[ecosystem.total_area.toFixed(1),\" hectares \\u2022 \",ecosystem.total_credits.toFixed(0),\" tCO\\u2082 credits\"]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:ecosystem.count/analytics.total_projects*100,sx:{mt:1,height:6,borderRadius:3}})]})})]}),index<analytics.ecosystem_breakdown.length-1&&/*#__PURE__*/_jsx(Divider,{})]},ecosystem.ecosystem_type))})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCCB Project Status Overview\"}),/*#__PURE__*/_jsx(List,{children:analytics.status_breakdown.map((status,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsxs(ListItemIcon,{children:[status.status==='approved'&&/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"success\"}),status.status==='rejected'&&/*#__PURE__*/_jsx(WarningIcon,{color:\"error\"}),status.status==='pending_verification'&&/*#__PURE__*/_jsx(ScheduleIcon,{color:\"warning\"}),status.status==='requires_review'&&/*#__PURE__*/_jsx(AssessmentIcon,{color:\"info\"})]}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{textTransform:'capitalize'},children:status.status.replace('_',' ')}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat(status.count,\" projects\"),color:getStatusColor(status.status),variant:\"outlined\",size:\"small\"})]}),secondary:/*#__PURE__*/_jsxs(Box,{sx:{mt:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[(status.count/analytics.total_projects*100).toFixed(1),\"% of total projects\"]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:status.count/analytics.total_projects*100,color:getStatusColor(status.status),sx:{mt:1,height:6,borderRadius:3}})]})})]}),index<analytics.status_breakdown.length-1&&/*#__PURE__*/_jsx(Divider,{})]},status.status))})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDDFA\\uFE0F Geographic Distribution\"}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"State/Region\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Projects\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total Area (ha)\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Carbon Credits (tCO\\u2082)\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Dominant Ecosystem\"})})]})}),/*#__PURE__*/_jsx(TableBody,{children:analytics.geographic_breakdown.map(location=>{var _location$dominant_ec;return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(LocationIcon,{sx:{mr:1,color:'primary.main'}}),location.location]})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Chip,{label:location.count,color:\"primary\",variant:\"outlined\",size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:location.total_area.toFixed(1)}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Typography,{color:\"secondary.main\",fontWeight:\"bold\",children:location.total_credits.toFixed(0)})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center'},children:[getEcosystemIcon(location.dominant_ecosystem),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{ml:1,textTransform:'capitalize'},children:((_location$dominant_ec=location.dominant_ecosystem)===null||_location$dominant_ec===void 0?void 0:_location$dominant_ec.replace('_',' '))||'Mixed'})]})})]},location.location);})})]})})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83C\\uDFAF Program Performance Insights\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:1,sx:{p:2,textAlign:'center'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",color:\"success.main\",children:[analytics.avg_project_size.toFixed(1),\" ha\"]}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Average Project Size\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:1,sx:{p:2,textAlign:'center'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",color:\"info.main\",children:[analytics.avg_carbon_credits.toFixed(1),\" tCO\\u2082\"]}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Average Carbon Credits/Project\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:1,sx:{p:2,textAlign:'center'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",color:\"warning.main\",children:[analytics.approval_rate.toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"NCCR Approval Rate\"})]})})]})]})})})]})]})]})]});};export default AdminAnalytics;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}