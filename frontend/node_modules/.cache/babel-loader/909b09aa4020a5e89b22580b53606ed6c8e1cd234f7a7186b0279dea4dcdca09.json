{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Box,Card,CardContent,Typography,Grid,Alert,Button,Container,Avatar,IconButton,LinearProgress,Tabs,Tab,Paper,Table,TableBody,TableCell,TableRow,Chip,Accordion,AccordionSummary,AccordionDetails}from'@mui/material';import{Download,Assessment,Logout as LogoutIcon,Refresh as RefreshIcon,TrendingUp as TrendIcon,Nature as EcoIcon,AccountBalance as EconomicIcon,VerifiedUser as ComplianceIcon,ExpandMore as ExpandMoreIcon,Place as LocationIcon,Timeline as TimelineIcon,Group as CommunityIcon,AttachMoney as MoneyIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reports=()=>{const navigate=useNavigate();const[userInfo,setUserInfo]=useState(null);const[reportData,setReportData]=useState(null);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState(0);useEffect(()=>{// Get user info\nconst storedUserInfo=localStorage.getItem('userInfo');if(storedUserInfo){setUserInfo(JSON.parse(storedUserInfo));}// Fetch report data\nfetchReportData();},[]);const fetchReportData=async()=>{try{setLoading(true);const response=await fetch('http://localhost:8002/api/reports');const data=await response.json();setReportData(data.report);}catch(error){console.error('Error fetching report data:',error);// Use mock data on error\nsetReportData({summary:{total_projects:15,total_area_restored:456.8,total_carbon_credits:1247,total_co2_sequestered:1247.0,communities_impacted:8},environmental_impact:{ecosystems_restored:{mangrove:6,seagrass:4,salt_marsh:3,coastal_wetland:2},biodiversity_indicators:{species_protected:45,habitat_connectivity:\"High\",water_quality_improvement:\"Significant\"}},economic_impact:{revenue_generated:623500,jobs_created:45,community_income_increase:\"25%\"},compliance_status:{verified_projects:12,pending_verification:3,compliance_rate:\"98%\"}});}finally{setLoading(false);}};const handleLogout=()=>{localStorage.removeItem('userInfo');localStorage.removeItem('auth_token');navigate('/login');};const handleDownloadReport=()=>{// Create CSV content\nconst csvContent=generateCSVReport();const blob=new Blob([csvContent],{type:'text/csv'});const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"blue_carbon_report_\".concat(new Date().toISOString().split('T')[0],\".csv\");a.click();window.URL.revokeObjectURL(url);};const generateCSVReport=()=>{if(!reportData)return'';const headers=['Metric','Value','Category'];const rows=[['Total Projects',reportData.summary.total_projects,'Summary'],['Total Area Restored (ha)',reportData.summary.total_area_restored,'Summary'],['Carbon Credits Issued',reportData.summary.total_carbon_credits,'Summary'],['CO₂ Sequestered (tons)',reportData.summary.total_co2_sequestered,'Summary'],['Communities Impacted',reportData.summary.communities_impacted,'Summary'],['Revenue Generated (₹)',reportData.economic_impact.revenue_generated,'Economic'],['Jobs Created',reportData.economic_impact.jobs_created,'Economic'],['Verified Projects',reportData.compliance_status.verified_projects,'Compliance'],['Compliance Rate',reportData.compliance_status.compliance_rate,'Compliance']];return[headers,...rows].map(row=>row.join(',')).join('\\n');};const TabPanel=_ref=>{let{children,value,index}=_ref;return/*#__PURE__*/_jsx(\"div\",{hidden:value!==index,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{pt:3},children:children})});};if(loading){return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{mt:2,mb:4},children:[/*#__PURE__*/_jsx(LinearProgress,{}),/*#__PURE__*/_jsx(Typography,{sx:{textAlign:'center',mt:2},children:\"Generating reports...\"})]});}if(!reportData){return/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",sx:{mt:2,mb:4},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Failed to load report data\"})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{mt:2,mb:4},children:[/*#__PURE__*/_jsx(Box,{sx:{mb:4},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:2},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",gutterBottom:true,children:\"\\uD83D\\uDCCA Blue Carbon Impact Reports\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"Comprehensive reporting and transparency dashboard\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"textSecondary\",children:userInfo?\"Generated for: \".concat(userInfo.email):'Public Dashboard'})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(IconButton,{onClick:fetchReportData,color:\"primary\",children:/*#__PURE__*/_jsx(RefreshIcon,{})}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Download,{}),onClick:handleDownloadReport,children:\"Download Report\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",startIcon:/*#__PURE__*/_jsx(LogoutIcon,{}),onClick:handleLogout,children:\"Logout\"})]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2.4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'primary.main',mr:1},children:/*#__PURE__*/_jsx(EcoIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Projects\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"primary.main\",children:reportData.summary.total_projects}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Total active projects\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2.4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'success.main',mr:1},children:/*#__PURE__*/_jsx(LocationIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Area\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:reportData.summary.total_area_restored.toLocaleString()}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Hectares restored\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2.4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'info.main',mr:1},children:/*#__PURE__*/_jsx(TrendIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Credits\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"info.main\",children:reportData.summary.total_carbon_credits.toLocaleString()}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Carbon credits issued\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2.4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'warning.main',mr:1},children:/*#__PURE__*/_jsx(EcoIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"CO\\u2082\"})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:\"warning.main\",children:[reportData.summary.total_co2_sequestered.toLocaleString(),\"t\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"CO\\u2082 sequestered\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:2.4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'secondary.main',mr:1},children:/*#__PURE__*/_jsx(CommunityIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Communities\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"secondary.main\",children:reportData.summary.communities_impacted}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Communities impacted\"})]})})})]}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[\"\\uD83C\\uDF0D \",/*#__PURE__*/_jsx(\"strong\",{children:\"International Standards:\"}),\" All projects comply with VERRA VCS standards and contribute to UN SDG 14 (Life Below Water)\"]}),/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%'},children:[/*#__PURE__*/_jsxs(Tabs,{value:activeTab,onChange:(e,newValue)=>setActiveTab(newValue),variant:\"fullWidth\",sx:{borderBottom:1,borderColor:'divider'},children:[/*#__PURE__*/_jsx(Tab,{label:\"\\uD83C\\uDF31 Environmental Impact\"}),/*#__PURE__*/_jsx(Tab,{label:\"\\uD83D\\uDCB0 Economic Analysis\"}),/*#__PURE__*/_jsx(Tab,{label:\"\\u2705 Compliance Status\"}),/*#__PURE__*/_jsx(Tab,{label:\"\\uD83D\\uDCC8 Timeline & Trends\"})]}),/*#__PURE__*/_jsx(TabPanel,{value:activeTab,index:0,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Ecosystem Restoration Breakdown\"}),Object.entries(reportData.environmental_impact.ecosystems_restored).map(_ref2=>{let[ecosystem,count]=_ref2;return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:1},children:[/*#__PURE__*/_jsx(Typography,{sx:{textTransform:'capitalize'},children:ecosystem.replace('_',' ')}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat(count,\" projects\"),size:\"small\",color:\"success\"})]},ecosystem);})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Biodiversity Impact\"}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Species Protected\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:reportData.environmental_impact.biodiversity_indicators.species_protected})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Habitat Connectivity\"}),/*#__PURE__*/_jsx(Chip,{label:reportData.environmental_impact.biodiversity_indicators.habitat_connectivity,color:\"success\"})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Water Quality Improvement\"}),/*#__PURE__*/_jsx(Chip,{label:reportData.environmental_impact.biodiversity_indicators.water_quality_improvement,color:\"info\"})]})]})})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:activeTab,index:1,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Revenue Generated\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h3\",color:\"primary.main\",children:[\"\\u20B9\",reportData.economic_impact.revenue_generated.toLocaleString()]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Total from carbon credit sales\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Jobs Created\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h3\",color:\"success.main\",children:reportData.economic_impact.jobs_created}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Direct employment opportunities\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Community Income Increase\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h3\",color:\"warning.main\",children:reportData.economic_impact.community_income_increase}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Average household increase\"})]})})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:activeTab,index:2,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Project Verification Status\"}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:1},children:[/*#__PURE__*/_jsx(Typography,{children:\"Verified Projects\"}),/*#__PURE__*/_jsx(Chip,{label:reportData.compliance_status.verified_projects,color:\"success\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:1},children:[/*#__PURE__*/_jsx(Typography,{children:\"Pending Verification\"}),/*#__PURE__*/_jsx(Chip,{label:reportData.compliance_status.pending_verification,color:\"warning\"})]})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:reportData.compliance_status.verified_projects/reportData.summary.total_projects*100,sx:{height:8,borderRadius:4}})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Compliance Rate\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h3\",color:\"success.main\",children:reportData.compliance_status.compliance_rate}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Meeting international standards\"}),/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mt:2},children:\"All projects meet VERRA VCS and Gold Standard requirements\"})]})})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:activeTab,index:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Project Timeline & Impact Trends\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3,p:3,bgcolor:'grey.50',borderRadius:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary.main\",gutterBottom:true,children:\"\\uD83D\\uDCCA Growth Trajectory (2024)\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"primary.main\",children:\"Q1\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"3 Projects Started\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"85 ha Restored\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:\"Q2\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"6 Projects Completed\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"156 ha Restored\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"info.main\",children:\"Q3\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"4 Projects Verified\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"124 ha Restored\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"warning.main\",children:\"Q4\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"2 Projects Ongoing\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"91 ha Planned\"})]})})]})]})]})})})]})]});};export default Reports;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}